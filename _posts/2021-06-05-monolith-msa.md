---
layout: single
title : "Monolith & MSA"
category: "msa"
---

> edX에서 쿠버네티스를 공부하면서 알게 된 내용을 정리하고 공유합니다.

MSA에 대해 알기 위해서는 기존 Monolith Architecture가 무엇인지, 단점은 무엇이었는지를 알아야 한다.

## Monolith

1. 클라우드 환경에 적합하지 않다.
2. 기능들이 퇴적물처럼 쌓여 있다.
3. 중복되는 기능들이 수천줄의 코드로 표현되어 있다.
4. 현대적이지 않은 하나의 언어로 구성이 되어 있다.
5. 구시대의 아키텍쳐 패턴과 규칙을들 지키고 있다.

위와 같은 특징을 가지는 Monolith은 큰 바위와 같다. 그 바위는 옮기기도 그 안을 수정하기도 쉽지 않다. 새로운 기능을 추가할 때 기존 코드와 상호작호하면서 복잡성은 기하급수적으로 올라가고, 로딩/컬파일링/빌드 시간이 매번 새로운 기능을 추가할 때마다 증가한다. 그리고 하나의 서버에서 돌아간다.

하나의 어플리케이션으로 하나의 서버에서 돌아야 하기 때문에 높은 메모리, 비싼 CPU가 필요하게 되며, 이런 컴퓨터는 비싸기 때문에 하드웨어와 경제적인 측면에서도 좋지 못하다.

또 확장(Scaling)도 어려운데, 병목이 생기는 내부 단일 기능에 대해 확장이 불가능하다. 전에 어플리케이션을 여러 서버에 두고 앞에 로드밸런서를 붙여 확장이 가능하지만 이 것 역시 비싼 서버를 여러대 두어야 하고, 확장이 불필요한 부분까지 확장이 들어가야 하기 때문에 좋지 않은 방법이다.

기능을 업데이트할 때도 비교적 긴 다운타임을 가져갈 수 밖에 없다.



## MSA

Micro Service Architecture는 매우 큰 바위와 다르게 수많은 조약돌과 같다고 할 수 있다. 하나의 큰 어플리케이션으로부터 분리 가능한 기능들을 각 분산된 모듈로 쪼개어 나누고 각자 구동하며 서로 가벼운 방식으로 소통이 가능하도록 하는 구조이다. 각 모듈들은 하나로 합쳐지만 기존 Monolith와 같은 기능을 제공한다. 

MSA를 조약돌과 같다고 했는데 조약돌은 느슨하게 결합되어 있고 각자의 특정한 비지니스 기능을 수행하는 마이크로서비스를 의미한다. MSA는 조약돌과 같이 또 바위와는 반대로 쉽게 고르고 옮기고 그룹화할 수 있다. 

마이크로 서비스는 적은 리소스를 가진 여러 서버에 베포가 될 수 있다. 그리고 복잡한 어플리케이션가 작은 독립 프로세스로 구성되는 Event Driven Arthitecture, Service Oriented Architecture와 결을 같이 한다. 

각 마이크로서비스는 각자 요구사항에 맞는 현대 프로그래밍 언어를 사용해서 개발된다. 

MSA의 분산화된 특성이 아키텍쳐에 복잡성을 더하기는 하지만, 이를 뛰어넘는 확장성이라는 장점을 얻을 수 있다. 전체 어플리케이션이 수요에 따라 모듈화될수록 각 마이크로서비스는 개별적으로 확장이 가능하다. 

매끄러운 업그레이드도 MSA의 장점이다. 각 마이크로 서비스가 순차적으로 업데이트 되기 때문에 사용자 입장에서 다운타임이 거의 없게 된다.

비지니스 입장에서 보면 새로운 기능을 더 빨리 개발할 수 있고 각 기능을 개발하는 여러 팀으로 나누어 운영할 수 있게 된다.